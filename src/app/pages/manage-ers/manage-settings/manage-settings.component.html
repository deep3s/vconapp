<div class="position-relative manage-settings-page app-main-page">
    <div
            class="d-flex justify-content-between export-section bg-white align-items-center py-2 px-3"
    >
        <app-breadcrumbs></app-breadcrumbs>
    </div>

    <div class="animated animatedFadeInUp fadeInUp w-100 position-relative">
        <div class="w-100 d-flex align-items-center justify-content-center">
            <div class="dashboard-container position-relative w-100">
                <div class="app-container py-2 px-3">
                    <div class="row">
                        <div class="col-12">
                            <div class="position-relative">
                                <div class="w-100 h-100">
                                    <div class="sub-page app-card-container">
                                        <div class="app-card bg-white p-4">
                                            <div class="d-flex align-items-center justify-content-between">
                                                <div class="d-flex align-items-center">
                                                    <span class="material-symbols-rounded semi-bold-icon large-icon">
                                                        create_new_folder</span>
                                                    <div class="section-heading-h2 fw-bold p-2 mx-2 my-2">
                                                        Manage Settings
                                                    </div>
                                                </div>
                                                <div class="d-flex justify-content-between align-items-center py-2 filters-section"></div>
                                            </div>
                                            <div class="divider mb-4"></div>

                                            <div class="app-card bg-app-light p-3">
                                                <div class="row pb-4">
                                                    <div class="col-12 col-md-6">
                                                        <div class="">
                                                            <div class="margin-section mb-4">
                                                                <div class="section-heading-h2 mb-2">
                                                                    Margin
                                                                </div>
                                                                <mat-checkbox *ngFor="let role of margins"
                                                                              class="app-check-box pr-4"
                                                                              [disableRipple]="true"
                                                                              [checked]="role.selected">
                                                                    <span class="role-name">{{role.name}}</span>
                                                                </mat-checkbox>
                                                            </div>
                                                  
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div class="section-heading-h2">Parties</div>
                                                            </div>
                                                            <div style="height: auto;margin-top: 3px;" class="pb-4 mb-4">
                                                                <ag-grid-angular
                                                                        class="{{ appliedThemeClassOnTable }} color-picker-id"
                                                                        [gridOptions]="manitobaGridOptions"
                                                                        (gridReady)="manitobaOnGridReady($event)"
                                                                        [rowData]="manitobaRowData"
                                                                ></ag-grid-angular>
                                                                <div class="my-2 d-flex align-items-center" *ngIf="showAddPartySection">
                                                                    <div class="flex-item flex-4 extra-width">
                                                                        <input class="app-text-box"
                                                                               id="party-name"
                                                                               [(ngModel)]="addPartyName"
                                                                               placeholder="Party Name"/>
                                                                    </div>
                                                                    <div class="flex-item flex-1">
                                                                        &nbsp; &nbsp;&nbsp;&nbsp;<input type="color" class="mx-3 color-show"
                                                                               [(ngModel)]="addPartyColor"/>
                                                                    </div>
                                                                    <div class="flex-item flex-1">
                                                                        <button (click)="addParty()"
                                                                                class="app-button-primary"> Add
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                                <!-- <div class="my-2 d-flex align-items-center"
                                                                     *ngIf="showAddPartySection">
                                                                    <input class="app-text-box"
                                                                           id="party-name"
                                                                           [(ngModel)]="addPartyName"
                                                                           placeholder="Party Name"/>
                                                                    <input type="color" class="mx-3 color-show"
                                                                           [(ngModel)]="addPartyColor"/>
                                                                    <button (click)="addParty()"
                                                                            class="app-button-primary"> Add
                                                                    </button>
                                                                </div> -->
                                                                <div class="add-btn mt-2 cursor-pointer"
                                                                (click)="openAddPartySection()">
                                                                  <span class="material-symbols-rounded medium-icon mx-2 view-option">
                                                                      add
                                                                  </span>
                                                                    <span>Add Party</span>
                                                                </div>
                                                            </div>
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div class="section-heading-h2">Callers</div>
                                                            </div>
                                                            <div style="height: auto" class="pb-4 mb-4">
                                                                <ag-grid-angular
                                                                        class="{{ appliedThemeClassOnTable }}"
                                                                        [gridOptions]="callerGridOptions"
                                                                        (gridReady)="callerOnGridReady($event)"
                                                                        [rowData]="callerRowData"
                                                                ></ag-grid-angular>
                                                                <!-- <div class="my-2 d-flex align-items-center"
                                                                     *ngIf="showAddCallerSection">
                                                                    <input class="app-text-box"
                                                                           id="caller-name"
                                                                           [(ngModel)]="addCallerName"
                                                                           placeholder="Caller Name"/>
                                                                    <span class="mx-2"></span>
                                                                    <button (click)="addCaller()"
                                                                            class="app-button-primary"> Add
                                                                    </button>
                                                                </div> -->

                                                                <div class="my-2 d-flex align-items-center" *ngIf="showAddCallerSection">
                                                                    <div class="flex-item flex-4 extra-width">
                                                                        <input class="app-text-box"
                                                                           id="caller-name"
                                                                           [(ngModel)]="addCallerName"
                                                                           placeholder="Caller Name"/>
                                                                    </div>
                                                                    <div class="flex-item flex-1">
                                                                        <span class="mx-2"></span>
                                                                    <button (click)="addCaller()"
                                                                            class="app-button-primary"> Add
                                                                    </button>
                                                                    </div>
                                                                </div>

                                                                <div class="add-btn mt-2 cursor-pointer"
                                                                (click)="openAddCallerSection()">
                                                                  <span class="material-symbols-rounded medium-icon mx-2 view-option">
                                                                      add
                                                                  </span>
                                                                    <span>Add Caller</span>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="col-12 col-md-6">
                                                        <div class="">
                                                            <div class="section-heading-h2 mb-2">Last Reported Warning
                                                            </div>
                                                            <div class="d-flex align-items-center gap-2">
                                                                <div class="app-ngs-container category mb-4">
                                                                    <ng-select class="app-multi-select"
                                                                               [searchable]="false" placeholder="select"
                                                                               (change)="applyPrev()"
                                                                               [items]="warning_1"
                                                                               [(ngModel)]="selectedWarning1"
                                                                               bindLabel="name" bindValue="name">
                                                                        <ng-template ng-label-tmp let-item="item">
                                                                            <span class="app-ngs-color"
                                                                                  [style]="{'background-color': item.color}"></span>
                                                                            <span class="app-ngs-value">{{item.name}}</span>
                                                                        </ng-template>
                                                                    </ng-select>
                                                                </div>
                                                                <div class="app-ngs-container category mb-4">
                                                                    <ng-select class="app-multi-select"
                                                                               [searchable]="false"
                                                                               placeholder="select "
                                                                               (change)="applyPrev()"
                                                                               [items]="warning_2"
                                                                               [(ngModel)]="selectedWarning2"
                                                                               bindLabel="name" bindValue="name">
                                                                        <ng-template ng-label-tmp let-item="item">
                                                                            <span class="app-ngs-color"
                                                                                  [style]="{'background-color': item.color}"></span>
                                                                            <span class="app-ngs-value">{{item.name}}</span>
                                                                        </ng-template>
                                                                    </ng-select>
                                                                </div>
                                                                <div class="app-ngs-container category mb-4">
                                                                    <ng-select class="app-multi-select"
                                                                               [searchable]="false" placeholder="select"
                                                                               (change)="applyPrev()"
                                                                               [items]="warning_3"
                                                                               [(ngModel)]="selectedWarning3"
                                                                               bindLabel="name" bindValue="name">
                                                                        <ng-template ng-label-tmp let-item="item">
                                                                            <span class="app-ngs-color"
                                                                                  [style]="{'background-color': item.color}"></span>
                                                                            <span class="app-ngs-value">{{item.name}}</span>
                                                                        </ng-template>
                                                                    </ng-select>
                                                                </div>
                                                            </div>
                                                            <div class="d-flex align-items-center justify-content-between flex-wrap mb-3">
                                                                <p class="section-heading-h2 mb-0">Caller's Ridings</p>
                                                                <div class="position-relative">
                                                                    <!-- <input class="app-text-box search-box" id="search-dashboard" [(ngModel)]="ridingSearchText" (keyup)="searchRidings()"
                                                                        placeholder="Search Riding or Caller" /> -->

                                                                        <input class="search-app-text-box search-box" id="search-dashboard" [(ngModel)]="ridingSearchText" id="quickFilter"
                                                                        (input)="onQuickFilterChanged()" placeholder="Search Riding or Caller" />
    
                                                                    <span class="icon-search material-symbols-rounded medium-icon">search</span>
                                                                    <span class="icon-clear material-symbols-rounded medium-icon"
                                                                          (click)="clearRidingSearch()"
                                                                          *ngIf="ridingSearchText">close</span>
                                                                </div>
                                                            </div>
                                                            <div style="height: auto">
                                                                <ag-grid-angular
                                                                    #agGrid
                                                                    class="{{appliedThemeClassOnTable}}"
                                                                    [rowData]="ridingRowData"
                                                                    [columnDefs]="ridingColumnDefs"
                                                                    [columnTypes]="columnTypes"
                                                                    [defaultColDef]="defaultColDef"
                                                                    [rowSelection]="'single'"
                                                                    (rowClicked)="onSelectionChanged($event)"
                                                                    [pagination]="true"
                                                                    [paginationPageSize]="18"
                                                                    [animateRows]="true"
                                                                    [suppressMovableColumns]="true"
                                                                    (gridReady)="ridingOnGridReady($event)"
                                                                    (firstDataRendered)="onFirstDataRendered()">
                                                                </ag-grid-angular>
    
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                                <div class="my-3 d-flex align-items-center justify-content-end">
                                                    <button class="app-button-primary" (click)="onSaveChanges()"> Save Changes </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
